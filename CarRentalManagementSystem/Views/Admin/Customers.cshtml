@model IEnumerable<CarRentalManagementSystem.DTOs.CustomerResponseDTO>
@{
    ViewData["Title"] = "Customers Management";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2><i class="fas fa-users me-2"></i>Customers Management</h2>
        </div>
        
        @if (Model.Any())
        {
            <div class="card shadow-sm">
                <div class="card-body p-3">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle table-striped table-sm">
                            <thead class="table-primary" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600;">
                                <tr style="text-align: center;">
                                    <th scope="col" style="width: 8%; padding: 10px 6px; font-size: 0.8rem;">ID</th>
                                    <th scope="col" style="width: 22%; padding: 10px 6px; font-size: 0.8rem;">Full Name</th>
                                    <th scope="col" style="width: 25%; padding: 10px 6px; font-size: 0.8rem;">Email</th>
                                    <th scope="col" style="width: 12%; padding: 10px 6px; font-size: 0.8rem;">Phone</th>
                                    <th scope="col" style="width: 12%; padding: 10px 6px; font-size: 0.8rem;">NIC</th>
                                    <th scope="col" style="width: 13%; padding: 10px 6px; font-size: 0.8rem;">License</th>
                                    <th scope="col" style="width: 8%; padding: 10px 6px; font-size: 0.8rem;">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var customer in Model)
                                {
                                    <tr style="vertical-align: middle;">
                                        <td class="text-center"><strong class="text-primary">#@customer.CustomerID</strong></td>
                                        <td class="text-center">
                                            <div class="d-flex align-items-center justify-content-center">
                                                @if (!string.IsNullOrEmpty(customer.ImageUrl))
                                                {
                                                    <img src="@customer.ImageUrl" alt="avatar" class="rounded-circle me-2" style="width:28px;height:28px;object-fit:cover; border: 2px solid #e3f2fd;" />
                                                }
                                                else
                                                {
                                                    <div class="bg-gradient-primary rounded-circle me-2 d-flex align-items-center justify-content-center" style="width:28px;height:28px; background: linear-gradient(45deg, #2196F3, #21CBF3);">
                                                        <i class="fas fa-user text-white" style="font-size:12px;"></i>
                                                    </div>
                                                }
                                                <span class="fw-medium">@customer.FullName</span>
                                            </div>
                                        </td>
                                        <td class="text-center"><span class="text-info fw-medium">@customer.Email</span></td>
                                        <td class="text-center">
                                            @if (string.IsNullOrEmpty(customer.Phone))
                                            {
                                                <span class="text-muted">Not provided</span>
                                            }
                                            else
                                            {
                                                <span class="fw-medium">@customer.Phone</span>
                                            }
                                        </td>
                                        <td class="text-center">
                                            @if (string.IsNullOrEmpty(customer.NIC))
                                            {
                                                <span class="text-muted">Not provided</span>
                                            }
                                            else
                                            {
                                                <span class="fw-medium">@customer.NIC</span>
                                            }
                                        </td>
                                        <td class="text-center">
                                            @if (string.IsNullOrEmpty(customer.LicenseNo))
                                            {
                                                <span class="text-muted">Not provided</span>
                                            }
                                            else
                                            {
                                                <span class="fw-medium">@customer.LicenseNo</span>
                                            }
                                        </td>
                                        <td class="text-center">
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewCustomerDetails(@customer.CustomerID)" style="border-radius: 20px;">
                                                    <i class="fas fa-eye"></i> View
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="text-center py-5">
                <i class="fas fa-users fa-3x text-muted mb-3"></i>
                <h4 class="text-muted">No customers found</h4>
                <p class="text-muted">No customers have registered yet.</p>
            </div>
        }
    </div>
</div>

<script>
    function viewCustomerDetails(customerId) {
        // Implementation for viewing customer details
        alert('Customer details view functionality to be implemented for customer: ' + customerId);
    }
</script>